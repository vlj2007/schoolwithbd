# 3.3. Введение в базы данных

Домашнее задание урока 3.3. Введение в базы данных.
В прошлом домашнем задании мы создали полноценное RESTful-приложение с определенной структурой. В этом мы начнем взаимодействовать с базой данных.

Цель сегодняшней домашней работы — установить и настроить взаимодействие приложения с базой данных и изменить логику в сервисных классах, чтобы все изменения сохранялись в БД.

*Среднее время выполнения: 120 минут.*


**Шаг 1**

Установить БД PostgreSQL. Создать базу данных hogwarts. Создать пользователя student с паролем chocolatefrog.

**Критерии оценки:** На компьютер установлена база данных PostgreSQL. Создана база данных и роль для доступа к ней.


**Шаг 2**

В application.properties приложения прописать следующие атрибуты:

- spring.datasource.url — путь до установленной БД;
- spring.datasource.username — имя пользователя для подключения, в нашем случае это student;
- spring.datasource.password — пароль пользователя: chocolatefrog;
- spring.jpa.hibernate.ddl = update.

**Критерии оценки:** В файл application.properties добавлены четыре свойства. Приложение успешно запускается без ошибок.

**Шаг 3**

Изменить модели Student и Faculty. К каждому классу добавить аннотацию @Entity. А к полю id добавить две аннотации: @Id и @GeneratedValue.

А также создать пакет repository, в котором будут находиться два интерфейса: StudentRepository и FacultyRepository. Оба этих интерфейса наследуют JpaRepository. Для интерфейса StudentRepository требуется указать, что в JpaRepository надо работать с моделью Student. Для FacultyRepository указать Faculty.

**Критерии оценки:** В модели добавлены аннотации @Entity, @Id и @GeneratedValue. Создан пакет repository. В нем находятся два интерфейса: StudentRepository и FacultyRepository.


**Шаг 4**

В сервисах создать приватные поля репозиториев. Для StudentService создать StudentRepository. Для FacultyService создать FacultyRepository. С помощью конструкторов подтягивать зависимости из контекста спринга (@Autowire).

В сервисах удалить HashMap, который использовали для хранения данных, и удалить счетчик идентификатора. Вместо них следует использовать функционал репозиториев.

**Критерии оценки:** В сервисы добавлены репозитории. Переделана логика работы с данными. Теперь все данные хранятся в БД, а сервисы пользуются репозиториями для их получения.



**Шаг 5**

Проверить все CRUD-запросы через Postman.

**Критерий оценки:** Все запросы отрабатывают, как ожидается (без 500 кодов в ответе).
